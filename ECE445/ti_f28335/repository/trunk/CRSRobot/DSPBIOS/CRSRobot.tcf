utils.loadPlatform("ti.platforms.control28335");

/* The following DSP/BIOS Features are enabled.  */
bios.enableRealTimeAnalysis(prog);
bios.enableRtdx(prog);
bios.enableTskManager(prog);

bios.GBL.BOARDNAME = "c28335";
bios.GBL.SPECIFYRTSLIB = 1;
bios.GBL.RTSLIB = "rts2800_fpu32.lib";
bios.GBL.CALLUSERINITFXN = 1;
bios.GBL.USERINITFXN = prog.extern("init_COECSL");
bios.MEM.STACKSIZE = 0x0c00;
bios.MEM.NOMEMORYHEAPS = 0;
bios.MEM.create("BEGIN_FLASH");
bios.MEM.instance("BEGIN_FLASH").comment = "Boot to Flash Entry Point";
bios.MEM.instance("BEGIN_FLASH").base = 0x33fff6;
bios.MEM.instance("BEGIN_FLASH").len = 0x0002;
bios.MEM.instance("BEGIN_FLASH").createHeap = 0;
bios.MEM.instance("BEGIN_FLASH").space = "code";
bios.MEM.create("BEGIN_M0");
bios.MEM.instance("BEGIN_M0").comment = "Boot to M0 Entry Point";
bios.MEM.instance("BEGIN_M0").len = 0x0002;
bios.MEM.instance("BEGIN_M0").createHeap = 0;
bios.MEM.instance("BEGIN_M0").space = "code";
bios.MEM.create("CSM_RSVD");
bios.MEM.instance("CSM_RSVD").comment = "Reserved by CSM";
bios.MEM.instance("CSM_RSVD").base = 0x33ff80;
bios.MEM.instance("CSM_RSVD").len = 0x0076;
bios.MEM.instance("CSM_RSVD").createHeap = 0;
bios.MEM.instance("CSM_RSVD").space = "code";
bios.MEM.instance("BOOTROM").len = 0x0bdc;
bios.MEM.create("END_BOOTROM");
bios.MEM.instance("END_BOOTROM").base = 0x3ff27c;
bios.MEM.instance("END_BOOTROM").len = 0x0d44;
bios.MEM.instance("END_BOOTROM").createHeap = 0;
bios.MEM.instance("END_BOOTROM").space = "code";
bios.MEM.create("FLASH_A");
bios.MEM.instance("FLASH_A").comment = "On-Chip Flash Memory";
bios.MEM.instance("FLASH_A").base = 0x338000;
bios.MEM.instance("FLASH_A").len = 0x7f80;
bios.MEM.instance("FLASH_A").createHeap = 0;
bios.MEM.instance("FLASH_A").space = "code";
bios.MEM.instance("FLASH").destroy();
bios.MEM.create("FLASH_BCD");
bios.MEM.instance("FLASH_BCD").comment = "On-Chip Flash Memory";
bios.MEM.instance("FLASH_BCD").base = 0x300000;
bios.MEM.instance("FLASH_BCD").len = 0x38000;
bios.MEM.instance("FLASH_BCD").createHeap = 0;
bios.MEM.instance("FLASH_BCD").space = "code";
bios.MEM.create("FPUTABLES");
bios.MEM.instance("FPUTABLES").base = 0x3febdc;
bios.MEM.instance("FPUTABLES").len = 0x06a0;
bios.MEM.instance("FPUTABLES").createHeap = 0;
bios.MEM.instance("FPUTABLES").space = "code";
bios.MEM.create("L0SARAM");
bios.MEM.instance("L0SARAM").comment = "On-Chip RAM Memory";
bios.MEM.instance("L0SARAM").base = 0x008000;
bios.MEM.instance("L0SARAM").len = 0x1000;
bios.MEM.instance("L0SARAM").createHeap = 0;
bios.MEM.create("L1SARAM");
bios.MEM.instance("L1SARAM").comment = "On-Chip RAM Memory";
bios.MEM.instance("L1SARAM").base = 0x009000;
bios.MEM.instance("L1SARAM").len = 0x6e00;
bios.MEM.create("M0SARAM");
bios.MEM.instance("M0SARAM").comment = "On-Chip RAM Memory";
bios.MEM.instance("M0SARAM").base = 0x000002;
bios.MEM.instance("M0SARAM").len = 0x03fe;
bios.MEM.instance("M0SARAM").createHeap = 0;
bios.MEM.create("M1SARAM");
bios.MEM.instance("M1SARAM").comment = "On-Chip RAM Memory";
bios.MEM.instance("M1SARAM").base = 0x000400;
bios.MEM.instance("M1SARAM").len = 0x0400;
bios.MEM.instance("M1SARAM").createHeap = 0;
bios.MEM.create("MEM_forDMA");
bios.MEM.instance("MEM_forDMA").base = 0x00fe00;
bios.MEM.instance("MEM_forDMA").len = 0x0200;
bios.MEM.instance("MEM_forDMA").createHeap = 0;
bios.MEM.create("PASSWORDS");
bios.MEM.instance("PASSWORDS").comment = "CSM Passwords in Flash";
bios.MEM.instance("PASSWORDS").base = 0x33fff8;
bios.MEM.instance("PASSWORDS").len = 0x0008;
bios.MEM.instance("PASSWORDS").createHeap = 0;
bios.MEM.instance("PASSWORDS").space = "code";
bios.MEM.BIOSOBJSEG = prog.get("L1SARAM");
bios.MEM.MALLOCSEG = prog.get("L1SARAM");
bios.MEM.ARGSSEG = prog.get("L1SARAM");
bios.MEM.STACKSEG = prog.get("L1SARAM");
bios.MEM.GBLINITSEG = prog.get("FLASH_BCD");
bios.MEM.TRCDATASEG = prog.get("L0SARAM");
bios.MEM.SYSDATASEG = prog.get("L1SARAM");
bios.MEM.OBJSEG = prog.get("L1SARAM");
bios.MEM.BIOSSEG = prog.get("FLASH_BCD");
bios.MEM.SYSINITSEG = prog.get("FLASH_BCD");
bios.MEM.HWISEG = prog.get("FLASH_BCD");
bios.MEM.RTDXTEXTSEG = prog.get("FLASH_BCD");
bios.MEM.TEXTSEG = prog.get("FLASH_BCD");
bios.MEM.SWITCHSEG = prog.get("FLASH_BCD");
bios.MEM.BSSSEG = prog.get("L1SARAM");
bios.MEM.EBSSSEG = prog.get("L1SARAM");
bios.MEM.CINITSEG = prog.get("FLASH_BCD");
bios.MEM.PINITSEG = prog.get("FLASH_BCD");
bios.MEM.ECONSTSEG = prog.get("FLASH_BCD");
bios.MEM.CONSTSEG = prog.get("FLASH_BCD");
bios.MEM.DATASEG = prog.get("FLASH_BCD");
bios.MEM.CIOSEG = prog.get("M0SARAM");
bios.MEM.ENABLELOADADDR = 1;
bios.MEM.LOADBIOSSEG = prog.get("FLASH_BCD");
bios.MEM.LOADSYSINITSEG = prog.get("FLASH_BCD");
bios.MEM.LOADGBLINITSEG = prog.get("FLASH_BCD");
bios.MEM.LOADTRCDATASEG = prog.get("FLASH_BCD");
bios.MEM.LOADTEXTSEG = prog.get("FLASH_BCD");
bios.MEM.LOADSWITCHSEG = prog.get("FLASH_BCD");
bios.MEM.LOADCINITSEG = prog.get("FLASH_BCD");
bios.MEM.LOADPINITSEG = prog.get("FLASH_BCD");
bios.MEM.LOADECONSTSEG = prog.get("FLASH_BCD");
bios.MEM.LOADCONSTSEG = prog.get("FLASH_BCD");
bios.MEM.LOADDATASEG = prog.get("FLASH_BCD");
bios.MEM.LOADHWISEG = prog.get("FLASH_BCD");
bios.MEM.LOADHWIVECSEG = prog.get("FLASH_BCD");
bios.MEM.LOADRTDXTEXTSEG = prog.get("FLASH_BCD");
bios.MEM.instance("L03SARAM").destroy();
bios.MEM.instance("MSARAM").destroy();
bios.BUF.OBJMEMSEG = prog.get("L1SARAM");
bios.SYS.TRACESEG = prog.get("L1SARAM");
bios.LOG.OBJMEMSEG = prog.get("M0SARAM");
bios.LOG.instance("LOG_system").bufSeg = prog.get("M0SARAM");
bios.LOG.instance("LOG_system").bufLen = 128;
bios.LOG.create("trace");
bios.STS.OBJMEMSEG = prog.get("L1SARAM");
bios.CLK.OBJMEMSEG = prog.get("L1SARAM");
bios.PRD.OBJMEMSEG = prog.get("L1SARAM");
bios.PRD.create("PRD_StartADC");
bios.PRD.instance("PRD_StartADC").order = 2;
bios.PRD.instance("PRD_StartADC").fxn = prog.extern("start_Adc_and_SPIenc");
bios.PRD.instance("PRD_StartADC").period = 1;
bios.PIE.instance("PIE_INT6_1").fxn = prog.extern("SPI_RXint");
bios.PIE.instance("PIE_INT6_1").useDispatcher = 1;
bios.PIE.instance("PIE_INT6_1").interruptMask0 = "all";
bios.PIE.instance("PIE_INT7_1").fxn = prog.extern("McBSP_TX_INTCH1_ISR");
bios.PIE.instance("PIE_INT7_1").useDispatcher = 1;
bios.PIE.instance("PIE_INT7_1").interruptMask0 = "all";
bios.PIE.instance("PIE_INT7_2").fxn = prog.extern("McBSP_RX_INTCH2_ISR");
bios.PIE.instance("PIE_INT7_2").useDispatcher = 1;
bios.PIE.instance("PIE_INT7_2").interruptMask0 = "all";
bios.PIE.instance("PIE_INT8_5").fxn = prog.extern("RXCINT_recv_ready");
bios.PIE.instance("PIE_INT8_5").useDispatcher = 1;
bios.PIE.instance("PIE_INT8_5").interruptMask0 = "all";
bios.PIE.instance("PIE_INT8_6").fxn = prog.extern("TXCINT_data_sent");
bios.PIE.instance("PIE_INT8_6").useDispatcher = 1;
bios.PIE.instance("PIE_INT8_6").interruptMask0 = "all";
bios.PIE.instance("PIE_INT9_1").fxn = prog.extern("RXAINT_recv_ready");
bios.PIE.instance("PIE_INT9_1").useDispatcher = 1;
bios.PIE.instance("PIE_INT9_1").interruptMask0 = "all";
bios.PIE.instance("PIE_INT9_2").fxn = prog.extern("TXAINT_data_sent");
bios.PIE.instance("PIE_INT9_2").useDispatcher = 1;
bios.PIE.instance("PIE_INT9_2").interruptMask0 = "all";
bios.PIE.instance("PIE_INT9_3").fxn = prog.extern("RXBINT_recv_ready");
bios.PIE.instance("PIE_INT9_3").useDispatcher = 1;
bios.PIE.instance("PIE_INT9_3").interruptMask0 = "all";
bios.PIE.instance("PIE_INT9_4").fxn = prog.extern("TXBINT_data_sent");
bios.PIE.instance("PIE_INT9_4").useDispatcher = 1;
bios.PIE.instance("PIE_INT9_4").interruptMask0 = "all";
bios.SWI.OBJMEMSEG = prog.get("L1SARAM");
bios.SWI.instance("PRD_swi").priority = 3;
bios.SWI.create("SWI_control");
bios.SWI.instance("SWI_control").order = 1;
bios.SWI.instance("SWI_control").priority = 3;
bios.SWI.instance("SWI_control").fxn = prog.extern("Control_swi");
bios.SWI.instance("SWI_control").priority = 2;
bios.TSK.OBJMEMSEG = prog.get("L1SARAM");
bios.TSK.STACKSIZE = 128;
bios.TSK.STACKSEG = prog.get("L1SARAM");
bios.TSK.instance("TSK_idle").stackSize = 512;
bios.TSK.instance("TSK_idle").stackMemSeg = prog.get("L1SARAM");
bios.TSK.create("TSK_I2C");
bios.TSK.instance("TSK_I2C").order = 1;
bios.TSK.instance("TSK_I2C").stackSize = 1024;
bios.TSK.instance("TSK_I2C").fxn = prog.extern("I2Ctsk");
bios.TSK.create("TSK_atmelcompass");
bios.TSK.instance("TSK_atmelcompass").order = 2;
bios.TSK.instance("TSK_atmelcompass").stackSize = 1024;
bios.TSK.instance("TSK_atmelcompass").fxn = prog.extern("atmel_compass_task");
bios.IDL.OBJMEMSEG = prog.get("L1SARAM");
bios.SEM.OBJMEMSEG = prog.get("L1SARAM");
bios.MBX.OBJMEMSEG = prog.get("L1SARAM");
bios.QUE.OBJMEMSEG = prog.get("L1SARAM");
bios.QUE.create("I2CSendStrfreeQueue");
bios.QUE.create("I2CSendStrmsgQueue");
bios.LCK.OBJMEMSEG = prog.get("L1SARAM");
bios.DIO.OBJMEMSEG = prog.get("L1SARAM");
bios.DHL.OBJMEMSEG = prog.get("L1SARAM");
bios.RTDX.RTDXDATASEG = prog.get("L1SARAM");
bios.HST.OBJMEMSEG = prog.get("L1SARAM");
bios.HST.instance("RTA_fromHost").bufSeg = prog.get("L1SARAM");
bios.HST.instance("RTA_toHost").bufSeg = prog.get("L1SARAM");
bios.PIP.OBJMEMSEG = prog.get("L1SARAM");
bios.SIO.OBJMEMSEG = prog.get("L1SARAM");
bios.MEM.instance("L47SARAM").destroy();
bios.SEM.create("SEM_atmel_rcservo");
bios.SEM.create("SEM_I2CSendStrmsg_rdy");
bios.PRD.instance("PRD_StartADC").fxn = prog.extern("start_dataCollection");
bios.SWI.instance("SWI_control").fxn = prog.extern("control");
bios.TSK.instance("TSK_atmelcompass").fxn = prog.extern("atmelcompass");
bios.PRD.instance("PRD_StartADC").order = 1;
bios.PRD.create("PRD_ft150_data_collection");
bios.PRD.instance("PRD_ft150_data_collection").order = 3;
bios.PRD.instance("PRD_ft150_data_collection").comment = "_ft150_data_collection";
bios.PRD.instance("PRD_ft150_data_collection").period = 50;
bios.PRD.instance("PRD_ft150_data_collection").period = 100;
bios.PRD.instance("PRD_ft150_data_collection").period = 200;
bios.PRD.instance("PRD_ft150_data_collection").fxn = prog.extern("ft150_data_collection");
bios.PRD.instance("PRD_ft150_data_collection").period = 10;
bios.PIE.instance("PIE_INT7_1").fxn = prog.extern("HWI_unused", "asm");
bios.PIE.instance("PIE_INT7_1").useDispatcher = 0;
bios.PIE.instance("PIE_INT7_2").fxn = prog.extern("HWI_unused", "asm");
bios.PIE.instance("PIE_INT7_2").useDispatcher = 0;
bios.PRD.instance("PRD_ft150_data_collection").destroy();
bios.SEM.instance("SEM_atmel_rcservo").destroy();
bios.SEM.instance("SEM_I2CSendStrmsg_rdy").destroy();
bios.QUE.instance("I2CSendStrfreeQueue").destroy();
bios.QUE.instance("I2CSendStrmsgQueue").destroy();
bios.TSK.instance("TSK_idle").order = 1;
bios.TSK.instance("TSK_I2C").order = 2;
bios.TSK.instance("TSK_atmelcompass").destroy();
bios.TSK.instance("TSK_I2C").destroy();
bios.PIE.instance("PIE_INT8_5").interruptMask0 = "none";
bios.PIE.instance("PIE_INT8_6").interruptMask0 = "none";
bios.PIE.instance("PIE_INT8_6").interruptMask0 = "self";
bios.PIE.instance("PIE_INT8_5").interruptMask0 = "self";
bios.PIE.instance("PIE_INT9_1").interruptMask0 = "self";
bios.PIE.instance("PIE_INT9_2").interruptMask0 = "self";
bios.PIE.instance("PIE_INT9_3").interruptMask0 = "self";
bios.PIE.instance("PIE_INT9_4").interruptMask0 = "self";
bios.PIE.instance("PIE_INT6_1").interruptMask0 = "none";
bios.PIE.instance("PIE_INT9_1").interruptMask0 = "all";
bios.PIE.instance("PIE_INT9_2").interruptMask0 = "all";
bios.PIE.instance("PIE_INT9_3").interruptMask0 = "all";
bios.PIE.instance("PIE_INT9_4").interruptMask0 = "all";
bios.PIE.instance("PIE_INT6_1").interruptMask0 = "self";
bios.PIE.instance("PIE_INT8_5").interruptMask0 = "all";
bios.PIE.instance("PIE_INT8_6").interruptMask0 = "all";
bios.PIE.instance("PIE_INT6_1").interruptMask0 = "all";
bios.SWI.create("SWI_printf");
bios.SWI.instance("SWI_printf").order = 2;
bios.SWI.instance("SWI_printf").priority = 3;
bios.SWI.instance("SWI_printf").fxn = prog.extern("printing");
bios.SWI.instance("SWI_printf").priority = 14;
bios.SWI.instance("SWI_printf").order = 1;
bios.SWI.instance("PRD_swi").order = 2;
bios.SWI.instance("KNL_swi").order = 3;
bios.SWI.instance("SWI_control").order = 4;
bios.SWI.instance("SWI_printf").priority = 1;
bios.PIE.instance("PIE_INT8_5").interruptMask0 = "self";
bios.PIE.instance("PIE_INT8_6").interruptMask0 = "self";
bios.PIE.instance("PIE_INT9_1").interruptMask0 = "self";
bios.PIE.instance("PIE_INT9_2").interruptMask0 = "self";
bios.PIE.instance("PIE_INT9_3").interruptMask0 = "self";
bios.PIE.instance("PIE_INT9_4").interruptMask0 = "self";
bios.PIE.instance("PIE_INT6_1").interruptMask0 = "self";
bios.SWI.create("SWI_serialC");
bios.SWI.instance("SWI_serialC").order = 5;
bios.SWI.instance("SWI_serialC").priority = 3;
bios.SWI.instance("SWI_serialC").fxn = prog.extern("matlab_serialSWI");
bios.SWI.instance("SWI_serialC").order = 1;
bios.SWI.instance("SWI_printf").order = 5;
bios.SWI.instance("SWI_serialC").priority = 1;
// !GRAPHICAL_CONFIG_TOOL_SCRIPT_INSERT_POINT!

prog.gen();
